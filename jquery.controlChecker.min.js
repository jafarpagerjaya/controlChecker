!function(s){s.fn.controlChecker=function(a){var e=s.extend(!0,{cssFramework:"boostrap",modal:{enabled:!0,id:"myModal"},formId:null,changes:{class:"has-changes",showText:!1,text:"Berganti"},success:{class:"has-success",showText:!0,text:"Tersedia"},warning:{class:"has-warning",showText:!0,text:"Sudah Terpakai"},empty:{class:"has-empty",showText:!0,text:"Tidak Boleh Kosong"},error:{class:"has-error",showText:!0,text:"Masih Kurang",secondText:"Karekter"},match:{class:"has-unmatch",showText:!0,unmatchText:"Belum Sama",matchText:"",matchThisId:null,matchToId:null},unsuit:{class:"has-unsuit",showText:!0,text:"Formatnya Belum Sesuai"},parentClass:"form-group",icon:{enabled:!0,postion:"before",success:"fa fa-check",warning:"fa fa-bell-o",empty:"fa fa-info",error:"fa fa-info-circle",unmatch:"fa fa-exclamation-circle",unsuit:"fa fa-exclamation"},ajax:{url:null,type:"get",dataType:"json",errorText:"Gagal Melakukan Ajax"},prevChained:!1},a);function t(a){var t,l,r,n;(a=s(this)).not("[readonly]")&&a.prop("required",!0),a.parent("div").is(":not(."+e.parentClass)&&(a.add(a.prev("label")).wrapAll("<div></div>"),(t=a.parent("div")).addClass(e.parentClass),t.hasClass(e.parentClass)&&0===t.siblings().length&&(n=(l=t.parent("div")).attr("id"),r=l.attr("class"),t.attr("id",n).addClass(r),t.unwrap())),s(":reset").on("click",function(){a.parent("."+e.parentClass).removeClass(e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),a.parent("."+e.parentClass).children("label").find("i, span:last-of-type").remove(),s(this).parents("form").find(":submit").attr("disabled","disabled")})}function l(a){var l=s(this);l.find("div").removeClass(e.match.class+" "+e.unsuit.class+" "+e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),null!=e.formId&&(thisInput=l.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)})),l.find("label > i, label > span:last-of-type").remove(),l.find(":submit").attr("disabled","disabled")}function r(s){return s.toLowerCase().replace(/(?:_)/g," ").replace(/(?:' '|\b)(\w)/g,function(s,a){return a.toUpperCase()}).replace(/[ ]{2,}/," ").replace(/[^\w\d\s,.-]/g,function(s,a){return" "})}"sui"==e.cssFramework&&(e.parentClass="field");var n,c,i,o,h=s("#"+e.formId);if(null==e.formId&&(h=s("form")),h.attr("autocomplete","off"),h.find(":submit").attr("disabled","disabled"),thisInput=h.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)}),1==e.icon.enabled){var d="<i />",p=e.icon.success,u=e.icon.warning,m=e.icon.empty,f=e.icon.error,v=e.icon.unmatch;iconUnsuit=e.icon.unsuit}if(1==e.modal.enabled)switch(e.cssFramework){case"sui":s("#"+e.modal.id).modal({onShow:function(){var a=s(this);l.call(a)}});break;default:s("#"+e.modal.id).on("show.bs.modal",function(){var a=s(this);l.call(a)})}return this.each(function(){var a,l,h,y,g;s(this).addClass("form-control"),s(this).one("focusin",function(){s(this).siblings().is("label")&&(g=!0)}),s(this).on("focusin",function(){var r=s(this);if(r.parents("form").find(":submit").attr("disabled","disabled"),1!=e.modal.enabled&&t.call(r),a!==r.parents("form").attr("id")&&(a=r.parents("form").attr("id"),l=r.val(),1==e.prevChained)){var n=r.parents("."+e.parentClass).prev("."+e.parentClass);h=n.find("select").val(),y=n.find("select").attr("name")}}),s(this).on("change",function(){var a,t,n,c,i,o=s(this),x=parseInt(o.attr("minlength")),C=o.data("type"),w=o.data("table"),b=o.parent("."+e.parentClass),T=b.children("label");if(o.val(jQuery.trim(o.val())),o.val(o.val().replace(/[ ]{2,}/," ")),void 0===C)switch(o.attr("type")){case"email":C="email";break;case"password":C="password";break;default:C=o.attr("name")}(0==T.is("label")&&(b.prepend("<label />"),b.children("label").text(r(C)),T=b.children("label")),void 0!==C)&&(T.find('span[data-type="'+C+'"]').length<1&&(T.append("<span />"),T.children("span").last().attr("data-type",C)));if((t=o.val()).toUpperCase()===t&&o.val(o.val().toUpperCase()),(T=function(a){return(a=s(this)).children("i").remove(),"after"===e.icon.position?a.append(" "+d):a.prepend(d+" "),a}.call(T)).show(),o.next("span.glyphicon").removeAttr("style"),0===o.val().length)return console.log("Data Kosong"),b.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.empty.class),T.children("i").attr("class",m),1==e.empty.showText&&T.children("span:last-of-type").text(" "+e.empty.text),!1;if(o.val().length<x){var k=x-o.val().length;return console.log("Data kurang dari minimun panjang karater"),b.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.empty.class+" "+e.success.class+" "+e.warning.class).addClass(e.error.class),T.children("i").attr("class",f),1==e.error.showText&&T.children("span:last-of-type").text(" "+e.error.text+" "+k+" "+e.error.secondText),!1}if(C.includes("email")){o.val(o.val().toLowerCase().replace(/[^a-zA-Z0-9@._-]/g,""));if(!o.val().match(/^([^\.\_\-\@])+([^\.\@\_\-])*((([^\d\@]){0,1})[a-z0-9]{2,}){0,1}(@([a-zA-Z]{2,})+(\.([a-z]{2,})){1,2})$/))return b.removeClass(e.empty.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.unsuit.class),T.children("i").attr("class",iconUnsuit),1==e.unsuit.showText&&T.children("span:last-of-type").text(" "+e.unsuit.text),!1}switch(o.attr("id")){case e.match.matchThisId:return console.log(e.match.matchThisId),n=s("#"+e.match.matchToId),1!=g&&(T.hide(),o.next("span.glyphicon").css("top","0")),n.val().length<1?(b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class),T.children("span:last-of-type").text(""),o.next("span.glyphicon").css("top","0"),!1):o.val()!==n.val()?(1==e.match.showText&&(b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class).addClass(e.match.class),T.show(),T.children("i").attr("class",v),T.children("span:last-of-type").text(" "+e.match.unmatchText),o.next("span.glyphicon").removeAttr("style")),!1):(b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class).addClass(e.changes.class),T.children("span:last-of-type").text(" "+e.match.matchText),T.children("i").removeClass(v),!1);case e.match.matchToId:return console.log(e.match.matchToId+" 1"),i=(c=(n=s("#"+e.match.matchThisId)).parents("."+e.parentClass)).find("label"),1!=g&&(i.hide(),T.hide(),n.next("span.glyphicon").css("top","0"),o.next("span.glyphicon").css("top","0")),n.val().length<1?(b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class),T.children("span:last-of-type").text(""),!1):(b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),T.children("span:last-of-type").text(""),o.val()!==n.val()?(1==e.match.showText&&(c.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class).addClass(e.match.class),i.show(),i.children("i").attr("class",v),i.children("span:last-of-type").text(" "+e.match.unmatchText),n.next("span.glyphicon").removeAttr("style")),!1):(c.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class).addClass(e.changes.class),i.children("span:last-of-type").text(" "+e.match.matchText),i.children("i").removeClass(v),!1))}return l===o.val()?(console.log("Data sama dengan yang ada di storedValue"),b.removeClass(e.unsuit.class+" "+e.changes.class+" "+e.success.class+" "+e.warning.class+" "+e.empty.class+" "+e.error.class),T.children("span:last-of-type").remove(),!1):void 0===w?(console.log("Data Berubah"),b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.changes.class),1==e.changes.showText?T.children("span:last-of-type").text(" "+e.changes.text):T.children("span:last-of-type").remove(),!1):void(void 0!==w&&(a=o.val(),b.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.changes.class+" "+e.warning.class),s.ajax({url:e.ajax.url,type:e.ajax.type,dataType:e.ajax.dataType,data:{columnName:C,table:w,value:a,prevColumnName:y,prevColumnValue:h},success:function(s){void 0!==s.exists&&(!0===s.exists?(b.addClass(e.warning.class),T.children("i").attr("class",u),1==e.error.showText&&T.children("span:last-of-type").text(" "+e.warning.text)):(b.addClass(e.success.class),T.children("i").attr("class",p),1==e.error.showText&&T.children("span:last-of-type").text(" "+e.success.text)))},error:function(s){b.addClass(e.error.class),T.children("span:last-of-type").text(" "+e.ajax.errorText),0===s.status&&console.log("Ajax Error Status ["+s.status+"]")}})))}),s(this).on("keypress",function(a){var e=s(this);return/[^a-zA-Z0-9\s@,._-]/i.test(String.fromCharCode(a.which))&&a.preventDefault(),(!e.hasClass("nospace")&&"email"!=e.attr("type")&&!e.attr("name").includes("email")&&"email"!=e.data("type")||32!==a.which)&&(e.hasClass("digit")?/\d/.test(String.fromCharCode(a.keyCode)):void 0)}),s(this).on("keyup focusout",function(a){var e=s(this);e.hasClass("textuppercase")&&e.val(e.val().toLocaleUpperCase()),e.hasClass("textlowercase")&&e.val(e.val().toLocaleLowerCase()),e.hasClass("textcapitalcase")&&e.val(r(e.val()))}),s(this).on("focusout",function(){n=s(this).parents("form").find("."+e.warning.class).length,c=s(this).parents("form").find("."+e.success.class).length,i=s(this).parents("form").find("."+e.changes.class).length,o=s(this).parents("form").find("."+e.empty.class+", ."+e.error.class+", ."+e.match.class+", ."+e.unsuit.class).length,0===n&&0===o&&(c>0||i>0)&&s(this).parents("form").find(":submit").removeAttr("disabled")})})}}(jQuery);