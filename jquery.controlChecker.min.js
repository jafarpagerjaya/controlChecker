!function(s){s.fn.controlChecker=function(a){var e=s.extend(!0,{modal:{enabled:!0,id:"myModal"},formId:null,changes:{class:"has-changes",showText:!1,text:"Berganti"},success:{class:"has-success",showText:!0,text:"Tersedia"},warning:{class:"has-warning",showText:!0,text:"Sudah Terpakai"},empty:{class:"has-empty",showText:!0,text:"Tidak Boleh Kosong"},error:{class:"has-error",showText:!0,text:"Masih Kurang",secondText:"Karekter"},match:{class:"has-unmatch",showText:!0,text:"Belum Sama",matchThisId:null,matchToId:null},unsuit:{class:"has-unsuit",showText:!0,text:"Formatnya Belum Sesuai"},parentClass:"form-group",icon:{enabled:!0,postion:"before",success:"fa fa-check",warning:"fa fa-bell-o",empty:"fa fa-info",error:"fa fa-info-circle",unmatch:"fa fa-exclamation-circle",unsuit:"fa fa-exclamation"},ajax:{url:null,type:"get",dataType:"json"},prevChained:!1},a);function t(a){var t,l,r,n;(a=s(this)).not("[readonly]")&&a.prop("required",!0),a.parent("div").is(":not(."+e.parentClass)&&(a.add(a.prev("label")).wrapAll("<div></div>"),(t=a.parent("div")).addClass(e.parentClass),t.hasClass(e.parentClass)&&0===t.siblings().length&&(n=(l=t.parent("div")).attr("id"),r=l.attr("class"),t.attr("id",n).addClass(r),t.unwrap())),s(":reset").on("click",function(){a.parent("."+e.parentClass).removeClass(e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),a.parent("."+e.parentClass).children("label").find("i, span:last-of-type").remove(),s(this).parents("form").find(":submit").attr("disabled","disabled")})}function l(s){return s.toLowerCase().replace(/(?:_)/g," ").replace(/(?:' '|\b)(\w)/g,function(s,a){return a.toUpperCase()}).replace(/[ ]{2,}/," ").replace(/[^\w\d\s,.-]/g,function(s,a){return" "})}var r,n,c,i,o=s("#"+e.formId);if(null==e.formId&&(o=s("form")),o.attr("autocomplete","off"),o.find(":submit").attr("disabled","disabled"),thisInput=o.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)}),1==e.icon.enabled){var p="<i />",h=e.icon.success,d=e.icon.warning,u=e.icon.empty,m=e.icon.error,f=e.icon.unmatch;iconUnsuit=e.icon.unsuit}return 1==e.modal.enabled&&s("#"+e.modal.id).on("show.bs.modal",function(){var a=s(this);a.find("div").removeClass(e.match.class+" "+e.unsuit.class+" "+e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),null!=e.formId&&(thisInput=a.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)})),a.find("label > i, label > span:last-of-type").remove(),a.find(":submit").attr("disabled","disabled")}),this.each(function(){var a,o,v,y;s(this).addClass("form-control"),s(this).on("focusin",function(){var l=s(this);if(l.parents("form").find(":submit").attr("disabled","disabled"),1!=e.modal.enabled&&t.call(l),a!==l.parents("form").attr("id")&&(a=l.parents("form").attr("id"),o=l.val(),1==e.prevChained)){var r=l.parents("."+e.parentClass).prev("."+e.parentClass);v=r.find("select").val(),y=r.find("select").attr("name")}}),s(this).on("change",function(){var a,t,r,n,c,i=s(this),g=parseInt(i.attr("minlength")),x=i.data("type"),C=i.data("table"),w=i.parent("."+e.parentClass),b=w.children("label");if(i.val(jQuery.trim(i.val())),i.val(i.val().replace(/[ ]{2,}/," ")),void 0===x)switch(i.attr("type")){case"email":x="email";break;case"password":x="password";break;default:x=i.attr("name")}(0==b.is("label")&&(w.prepend("<label />"),w.children("label").text(l(x)),b=w.children("label")),void 0!==x)&&(b.find('span[data-type="'+x+'"]').length<1&&(b.append("<span />"),b.children("span").last().attr("data-type",x)));if((t=i.val()).toUpperCase()===t?i.val(i.val().toUpperCase()):"email"!==x&&i.val(i.val().toLowerCase().replace(/(?:_' '|\b)(\w)/g,function(s,a){return a.toUpperCase()})),(b=function(a){return(a=s(this)).children("i").remove(),"after"===e.icon.position?a.append(" "+p):a.prepend(p+" "),a}.call(b)).show(),i.next("span.glyphicon").removeAttr("style"),0===i.val().length)return console.log("Data Kosong"),w.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.empty.class),b.children("i").attr("class",u),1==e.empty.showText&&b.children("span:last-of-type").text(" "+e.empty.text),!1;if(i.val().length<g){var T=g-i.val().length;return console.log("Data kurang dari minimun panjang karater"),w.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.empty.class+" "+e.success.class+" "+e.warning.class).addClass(e.error.class),b.children("i").attr("class",m),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.error.text+" "+T+" "+e.error.secondText),!1}if(x.includes("email")){i.val(i.val().toLowerCase().replace(/[^a-zA-Z0-9@._-]/g,""));if(!i.val().match(/^([^\d\_\-\@])+([^\@\_\-])*((([^\d\@]){0,1})[a-z]{2,}){0,1}(@([a-zA-Z]{2,})+(\.([a-z]{2,})){1,2})$/))return w.removeClass(e.empty.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.unsuit.class),b.children("i").attr("class",iconUnsuit),1==e.unsuit.showText&&b.children("span:last-of-type").text(" "+e.unsuit.text),!1}switch(i.attr("id")){case e.match.matchThisId:return console.log(e.match.matchThisId),(r=s("#"+e.match.matchToId)).val().length<1?(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class),b.hide(),i.next("span.glyphicon").css("top","0"),!1):(c=(n=r.parents("."+e.parentClass)).find("label"),i.val()!==r.val()?(1==e.match.showText&&(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class).addClass(e.match.class),b.show(),b.children("i").attr("class",f),i.next("span.glyphicon").removeAttr("style"),b.children("span:last-of-type").text(" "+e.match.text)),!1):(n.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),c.children("span:last-of-type").text(" Sama"),c.hide(),r.next("span.glyphicon").css("top","0"),w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),b.children("span:last-of-type").text(" OK"),b.hide(),i.next("span.glyphicon").css("top","0"),!1));case e.match.matchToId:return console.log(e.match.matchToId),(r=s("#"+e.match.matchThisId)).val().length<1?(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class),b.hide(),i.next("span.glyphicon").css("top","0"),!1):(c=(n=r.parents("."+e.parentClass)).find("label"),i.val()!==r.val()?(1==e.match.showText&&(n.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class).addClass(e.match.class),c.show(),c.children("i").attr("class",f),c.children("span:last-of-type").text(" "+e.match.text),r.next("span.glyphicon").removeAttr("style"),w.removeClass(e.empty.class+" "+e.error.class),b.children("span:last-of-type").text(" "+e.match.text),b.hide(),i.next("span.glyphicon").css("top","0")),!1):(n.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),c.children("span:last-of-type").text(" Sama"),c.hide(),r.next("span.glyphicon").css("top","0"),w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),b.children("span:last-of-type").text(" OK"),b.hide(),i.next("span.glyphicon").css("top","0"),!1))}if(o===i.val())return console.log("Data sama dengan yang ada di storedValue"),w.removeClass(e.unsuit.class+" "+e.changes.class+" "+e.success.class+" "+e.warning.class+" "+e.empty.class+" "+e.error.class),b.children("span:last-of-type").remove(),!1;void 0===C&&(console.log("Data Berubah"),w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.changes.class),1==e.changes.showText?b.children("span:last-of-type").text(" "+e.changes.text):b.children("span:last-of-type").remove()),void 0!==C&&(a=i.val(),s.ajax({url:e.ajax.url,type:e.ajax.type,dataType:e.ajax.dataType,data:{columnName:x,table:C,value:a,prevColumnName:y,prevColumnValue:v},success:function(s){void 0!==s.exists&&(!0===s.exists?(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.changes.class).addClass(e.warning.class),b.children("i").attr("class",d),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.warning.text)):(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.warning.class+" "+e.changes.class).addClass(e.success.class),b.children("i").attr("class",h),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.success.text)))},error:function(){}}))}),s(this).on("keypress",function(a){var e=s(this);return/[^a-zA-Z0-9\s@,._-]/i.test(String.fromCharCode(a.which))&&a.preventDefault(),(!e.hasClass("nospace")&&"email"!=e.attr("type")&&"email"!=e.attr("name")&&"email"!=e.data("type")||32!==a.which)&&(e.hasClass("digit")?/\d/.test(String.fromCharCode(a.keyCode)):void 0)}),s(this).on("keyup focusout",function(a){var e=s(this);e.hasClass("textuppercase")&&e.val(e.val().toLocaleUpperCase()),e.hasClass("textlowercase")&&e.val(e.val().toLocaleLowerCase()),e.hasClass("textcapitalcase")&&e.val(l(e.val()))}),s(this).on("focusout",function(){r=s(this).parents("form").find("."+e.warning.class).length,n=s(this).parents("form").find("."+e.success.class).length,c=s(this).parents("form").find("."+e.changes.class).length,i=s(this).parents("form").find("."+e.empty.class+", ."+e.error.class+", ."+e.match.class+", ."+e.unsuit.class).length,0===r&&0===i&&(n>0||c>0)&&s(this).parents("form").find(":submit").removeAttr("disabled")})})}}(jQuery);