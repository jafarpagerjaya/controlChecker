!function(s){s.fn.controlChecker=function(a){var e=s.extend(!0,{cssFramework:"boostrap",modal:{enabled:!0,id:"myModal"},formId:null,changes:{class:"has-changes",showText:!1,text:"Berganti"},success:{class:"has-success",showText:!0,text:"Tersedia"},warning:{class:"has-warning",showText:!0,text:"Sudah Terpakai"},empty:{class:"has-empty",showText:!0,text:"Tidak Boleh Kosong"},error:{class:"has-error",showText:!0,text:"Masih Kurang",secondText:"Karekter"},match:{class:"has-unmatch",showText:!0,unmatchText:"Belum Sama",matchText:"",matchThisId:null,matchToId:null},unsuit:{class:"has-unsuit",showText:!0,text:"Formatnya Belum Sesuai"},parentClass:"form-group",icon:{enabled:!0,postion:"before",success:"fa fa-check",warning:"fa fa-bell-o",empty:"fa fa-info",error:"fa fa-info-circle",unmatch:"fa fa-exclamation-circle",unsuit:"fa fa-exclamation"},ajax:{url:"null",type:"get",errorText:"Gagal Melakukan Ajax"},chained:{enabled:!1,id:null,activeOnId:null}},a);function t(a){var t,l,n,r;(a=s(this)).not("[readonly]")&&a.prop("required",!0),a.parent("div").is(":not(."+e.parentClass)&&(a.add(a.prev("label")).wrapAll("<div></div>"),(t=a.parent("div")).addClass(e.parentClass),t.hasClass(e.parentClass)&&0===t.siblings().length&&(r=(l=t.parent("div")).attr("id"),n=l.attr("class"),t.attr("id",r).addClass(n),t.unwrap())),s(":reset").on("click",function(){a.parent("."+e.parentClass).removeClass(e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),a.parent("."+e.parentClass).children("label").find("i, span:last-of-type").remove(),s(this).parents("form").find(":submit").attr("disabled","disabled")})}function l(a){var l=s(this);l.find("div").removeClass(e.match.class+" "+e.unsuit.class+" "+e.warning.class+" "+e.success.class+" "+e.changes.class+" "+e.empty.class+" "+e.error.class),null!=e.formId&&(thisInput=l.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)})),l.find("label > i, label > span:last-of-type").remove(),l.find(":submit").attr("disabled","disabled")}function n(s){return s.toLowerCase().replace(/(?:_)/g," ").replace(/(?:' '|\b)(\w)/g,function(s,a){return a.toUpperCase()}).replace(/[ ]{2,}/," ").replace(/[^\w\d\s,.-]/g,function(s,a){return" "})}"sui"==e.cssFramework&&(e.parentClass="field");var r,c,i,o,d=s("#"+e.formId);if(null==e.formId&&(d=s("form")),d.attr("autocomplete","off"),d.find(":submit").attr("disabled","disabled"),thisInput=d.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);t.call(a)}),1==e.icon.enabled){var h="<i />",u=e.icon.success,p=e.icon.warning,m=e.icon.empty,f=e.icon.error,v=e.icon.unmatch;iconUnsuit=e.icon.unsuit}if(1==e.modal.enabled)switch(e.cssFramework){case"sui":s("#"+e.modal.id).modal({onShow:function(){var a=s(this);l.call(a)}});break;default:s("#"+e.modal.id).on("show.bs.modal",function(){var a=s(this);l.call(a)})}return this.each(function(){var a,l,d,g;s(this).addClass("form-control"),s(this).one("focusin",function(){s(this).siblings().is("label")&&(g=!0)}),s(this).on("focusin",function(){var n=s(this);if(n.parents("form").find(":submit").attr("disabled","disabled"),1!=e.modal.enabled&&t.call(n),a!==n.parents("form").attr("id")&&(a=n.parents("form").attr("id"),l=n.val()),1==e.chained.enabled){if(0==s("input#"+e.chained.activeOnId+", select#"+e.chained.activeOnId).length)return console.log("undefined chained activeOnId"),!1;if(0==s("input#"+e.chained.id+", select#"+e.chained.id).length)return console.log("undefined chained id"),!1;if(n.attr("id")!==e.chained.activeOnId&&n.attr("id")!==e.chained.id)return!1;var r=void 0;switch(n.attr("id")){case e.chained.id:r=s("#"+e.chained.activeOnId);break;default:r=s("#"+e.chained.id)}d=r.val(),storedChainName=r.attr("name"),console.log("chained name = "+storedChainName+" chained value = "+d)}}),s(this).on("change",function(){var a,t,r,c,i,o=s(this),y=parseInt(o.attr("minlength")),x=o.data("type"),C=o.data("table"),w=o.parent("."+e.parentClass),b=w.children("label");if(o.val(jQuery.trim(o.val())),o.val(o.val().replace(/[ ]{2,}/," ")),void 0===x)switch(o.attr("type")){case"email":x="email";break;case"password":x="password";break;default:x=o.attr("name")}(0==b.is("label")&&(w.prepend("<label />"),w.children("label").text(n(x)),b=w.children("label")),void 0!==x)&&(b.find('span[data-type="'+x+'"]').length<1&&(b.append("<span />"),b.children("span").last().attr("data-type",x)));if((t=o.val()).toUpperCase()===t&&o.val(o.val().toUpperCase()),(b=function(a){return(a=s(this)).children("i").remove(),"after"===e.icon.position?a.append(" "+h):a.prepend(h+" "),a}.call(b)).show(),o.next("span.glyphicon").removeAttr("style"),0===o.val().length)return console.log("Data Kosong"),w.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.empty.class),b.children("i").attr("class",m),1==e.empty.showText&&b.children("span:last-of-type").text(" "+e.empty.text),!1;if(o.val().length<y){var T=y-o.val().length;return console.log("Data kurang dari minimun panjang karater"),w.removeClass(e.unsuit.class+" "+e.match.class+" "+e.changes.class+" "+e.empty.class+" "+e.success.class+" "+e.warning.class).addClass(e.error.class),b.children("i").attr("class",f),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.error.text+" "+T+" "+e.error.secondText),!1}if(x.includes("email")){o.val(o.val().toLowerCase().replace(/[^a-zA-Z0-9@._-]/g,""));if(!o.val().match(/^([^\.\_\-\@])+([^\.\@\_\-])*((([^\d\@]){0,1})[a-z0-9]{2,}){0,1}(@([a-zA-Z]{2,})+(\.([a-z]{2,})){1,2})$/))return w.removeClass(e.empty.class+" "+e.match.class+" "+e.changes.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.unsuit.class),b.children("i").attr("class",iconUnsuit),1==e.unsuit.showText&&b.children("span:last-of-type").text(" "+e.unsuit.text),!1}switch(o.attr("id")){case e.match.matchThisId:return console.log(e.match.matchThisId),r=s("#"+e.match.matchToId),1!=g&&(b.hide(),o.next("span.glyphicon").css("top","0")),r.val().length<1?(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class),b.children("span:last-of-type").text(""),o.next("span.glyphicon").css("top","0"),!1):o.val()!==r.val()?(1==e.match.showText&&(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class).addClass(e.match.class),b.show(),b.children("i").attr("class",v),b.children("span:last-of-type").text(" "+e.match.unmatchText),o.next("span.glyphicon").removeAttr("style")),!1):(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class).addClass(e.changes.class),b.children("span:last-of-type").text(" "+e.match.matchText),b.children("i").removeClass(v),!1);case e.match.matchToId:return console.log(e.match.matchToId+" 1"),i=(c=(r=s("#"+e.match.matchThisId)).parents("."+e.parentClass)).find("label"),1!=g&&(i.hide(),b.hide(),r.next("span.glyphicon").css("top","0"),o.next("span.glyphicon").css("top","0")),r.val().length<1?(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class),b.children("span:last-of-type").text(""),!1):(w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class),b.children("span:last-of-type").text(""),o.val()!==r.val()?(1==e.match.showText&&(c.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.changes.class).addClass(e.match.class),i.show(),i.children("i").attr("class",v),i.children("span:last-of-type").text(" "+e.match.unmatchText),r.next("span.glyphicon").removeAttr("style")),!1):(c.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.match.class).addClass(e.changes.class),i.children("span:last-of-type").text(" "+e.match.matchText),i.children("i").removeClass(v),!1))}return l===o.val()?(console.log("Data sama dengan yang ada di storedValue"),w.removeClass(e.unsuit.class+" "+e.changes.class+" "+e.success.class+" "+e.warning.class+" "+e.empty.class+" "+e.error.class),b.children("span:last-of-type").remove(),!1):void 0===C?(console.log("Data Berubah"),w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.warning.class).addClass(e.changes.class),1==e.changes.showText?b.children("span:last-of-type").text(" "+e.changes.text):b.children("span:last-of-type").remove(),1==e.chained.enabled&&o.attr("id")==e.chained.id&&s("#"+e.chained.activeOnId).trigger("change"),!1):void(void 0!==C&&(a=o.val(),w.removeClass(e.unsuit.class+" "+e.empty.class+" "+e.error.class+" "+e.success.class+" "+e.changes.class+" "+e.warning.class),s.ajax({url:e.ajax.url,type:e.ajax.type,dataType:"json",data:{field:x,table:C,value:a,prevColumnName:void 0,prevColumnValue:d},success:function(s){void 0!==s.exists&&(!0===s.exists?(w.addClass(e.warning.class),b.children("i").attr("class",p),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.warning.text)):(w.addClass(e.success.class),b.children("i").attr("class",u),1==e.error.showText&&b.children("span:last-of-type").text(" "+e.success.text)))},error:function(s){w.addClass(e.error.class),b.children("span:last-of-type").text(" "+e.ajax.errorText),solution=void 0,0===s.status&&(solution="Check Network Connection"),200===s.status&&(solution="Check Server Returns Format"),404===s.status&&(solution="Check Ajax Url"),500===s.status&&(solution="Check Internal Server"),console.log("Ajax Error Status ["+s.status+"] => "+s.statusText+" => Solution "+solution)}})))}),s(this).on("keypress",function(a){var e=s(this);return/[^a-zA-Z0-9\s@,._-]/i.test(String.fromCharCode(a.which))&&a.preventDefault(),(!e.hasClass("nospace")&&"email"!=e.attr("type")&&!e.attr("name").includes("email")&&"email"!=e.data("type")||32!==a.which)&&(e.hasClass("digit")?/\d/.test(String.fromCharCode(a.keyCode)):void 0)}),s(this).on("keyup focusout",function(a){var e=s(this);e.hasClass("textuppercase")&&e.val(e.val().toLocaleUpperCase()),e.hasClass("textlowercase")&&e.val(e.val().toLocaleLowerCase()),e.hasClass("textcapitalcase")&&e.val(n(e.val()))}),s(this).on("focusout",function(){setTimeout(function(){r=s(this).parents("form").find("."+e.warning.class).length,c=s(this).parents("form").find("."+e.success.class).length,i=s(this).parents("form").find("."+e.changes.class).length,o=s(this).parents("form").find("."+e.empty.class+", ."+e.error.class+", ."+e.match.class+", ."+e.unsuit.class).length,0===r&&0===o&&(c>0||i>0)&&s(this).parents("form").find(":submit").removeAttr("disabled"),console.log("W = "+r+" D = "+o+" C = "+i+" S = "+c)},100)})})}}(jQuery);