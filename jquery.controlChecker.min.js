!function(s){s.fn.controlChecker=function(a){var e,t,l,n,r=s.extend(!0,{cssFramework:"boostrap",modal:{enabled:!0,id:"myModal"},formId:null,changes:{class:"has-changes",showText:!1,text:"Berganti"},success:{class:"has-success",showText:!0,text:"Tersedia"},warning:{class:"has-warning",showText:!0,text:"Sudah Terpakai"},empty:{class:"has-empty",showText:!0,text:"Tidak Boleh Kosong"},error:{class:"has-error",showText:!0,text:"Masih Kurang",secondText:"Karekter"},match:{class:"has-unmatch",showText:!0,unmatchText:"Belum Sama",matchText:"",matchThisId:null,matchToId:null},unsuit:{class:"has-unsuit",showText:!0,text:"Formatnya Belum Sesuai"},parentClass:"form-group",icon:{enabled:!0,postion:"before",success:"fa fa-check",warning:"fa fa-bell-o",empty:"fa fa-info",error:"fa fa-info-circle",unmatch:"fa fa-exclamation-circle",unsuit:"fa fa-exclamation"},ajax:{url:"null",type:"get",errorText:"Gagal Melakukan Ajax"},chained:{enabled:!1,id:null,activeOnId:null}},a);function c(){var a,e,t,l,n=s(this);n.not("[readonly]")&&n.prop("required",!0),n.parent("div").is(":not(."+r.parentClass)&&(n.add(n.prev("label")).wrapAll("<div></div>"),(a=n.parent("div")).addClass(r.parentClass),a.hasClass(r.parentClass)&&0===a.siblings().length&&(l=(e=a.parent("div")).attr("id"),t=e.attr("class"),a.attr("id",l).addClass(t),a.unwrap())),s(":reset").on("click",function(){n.parent("."+r.parentClass).removeClass(r.warning.class+" "+r.success.class+" "+r.changes.class+" "+r.empty.class+" "+r.error.class),n.parent("."+r.parentClass).children("label").find("i, span:last-of-type").remove(),s(this).parents("form").find(":submit").attr("disabled","disabled")})}function i(a){var e=s(this);e.find("div").removeClass(r.match.class+" "+r.unsuit.class+" "+r.warning.class+" "+r.success.class+" "+r.changes.class+" "+r.empty.class+" "+r.error.class),null!==r.formId&&(thisInput=e.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);c.call(a)})),e.find("label > i, label > span:last-of-type").remove(),e.find(":submit").attr("disabled","disabled")}function o(s){return s.toLowerCase().replace(/(?:_)/g," ").replace(/(?:' '|\b)(\w)/g,function(s,a){return a.toUpperCase()}).replace(/[ ]{2,}/," ").replace(/[^\w\d\s,.-]/g,function(s,a){return" "})}function d(){var a=s(this);return a.children("i").remove(),"after"===r.icon.position?a.append(" "+u):a.prepend(u+" "),a}function h(){e=p.find("."+r.warning.class).length,t=p.find("."+r.success.class).length,l=p.find("."+r.changes.class).length,n=p.find("."+r.empty.class+", ."+r.error.class+", ."+r.match.class+", ."+r.unsuit.class).length,0===e&&0===n&&(t>0||l>0)&&p.find(":submit").removeAttr("disabled")}"sui"==r.cssFramework&&(r.parentClass="field");var p=s("#"+r.formId);if(null===r.formId&&(p=s("form")),p.attr("autocomplete","off"),p.find(":submit").attr("disabled","disabled"),thisInput=p.find('input[type!="hidden"],textarea,select').filter('[type!="reset"]').filter('[type!="submit"]').filter('[type!="button"]').filter('[type!="checkbox"]').filter('[type!="radio"]').filter('[type!="file"]'),thisInput.each(function(){var a=s(this);c.call(a)}),!0===r.icon.enabled){var u="<i />",m=r.icon.success,f=r.icon.warning,v=r.icon.empty,y=r.icon.error,x=r.icon.unmatch;iconUnsuit=r.icon.unsuit}if(!0===r.modal.enabled)switch(r.cssFramework){case"sui":s("#"+r.modal.id).modal({onShow:function(){var a=s(this);i.call(a)}});break;default:s("#"+r.modal.id).on("show.bs.modal",function(){var a=s(this);i.call(a)})}return this.each(function(){var a,e,t,l,n;s(this).addClass("form-control"),s(this).one("focusin",function(){s(this).siblings().is("label")&&(l=!0)}),s(this).on("focusin",function(){var i=s(this);if(i.parents("form").find(":submit").attr("disabled","disabled"),!0!==r.modal.enabled&&c.call(i),a!==i.parents("form").attr("id")&&(a=i.parents("form").attr("id"),e=i.val(),!0===l&&(n=i.parents("."+r.parentClass).find("label").html())),!0===r.chained.enabled){if(0===s("input#"+r.chained.activeOnId+", select#"+r.chained.activeOnId).length)return console.log("undefined chained activeOnId"),!1;if(0===s("input#"+r.chained.id+", select#"+r.chained.id).length)return console.log("undefined chained id"),!1;if(i.attr("id")!==r.chained.activeOnId&&i.attr("id")!==r.chained.id)return!1;var o;switch(i.attr("id")){case r.chained.id:o=s("#"+r.chained.activeOnId);break;default:o=s("#"+r.chained.id)}t=o.val(),storedChainName=o.attr("name")}}),s(this).on("change",function(){var a,c,i,p,u,g=s(this),C=parseInt(g.attr("minlength")),b=g.data("type"),w=g.data("table"),T=g.parent("."+r.parentClass),k=T.children("label");if(g.val(jQuery.trim(g.val())),g.val(g.val().replace(/[ ]{2,}/," ")),void 0===b)switch(g.attr("type")){case"email":b="email";break;case"password":b="password";break;default:b=g.attr("name")}(0==k.is("label")&&(T.prepend("<label />"),T.children("label").text(o(b)),k=T.children("label")),void 0!==b)&&(k.find('span[data-type="'+b+'"]').length<1&&(k.append("<span />"),k.children("span").last().attr("data-type",b)));if((c=g.val()).toUpperCase()===c&&g.val(g.val().toUpperCase()),(k=d.call(k)).show(),g.next("span.glyphicon").removeAttr("style"),0===g.val().length)return T.removeClass(r.unsuit.class+" "+r.match.class+" "+r.changes.class+" "+r.error.class+" "+r.success.class+" "+r.warning.class).addClass(r.empty.class),k.children("i").attr("class",v),1==r.empty.showText&&k.children("span:last-of-type").text(" "+r.empty.text),!1;if(g.val().length<C){var I=C-g.val().length;return T.removeClass(r.unsuit.class+" "+r.match.class+" "+r.changes.class+" "+r.empty.class+" "+r.success.class+" "+r.warning.class).addClass(r.error.class),k.children("i").attr("class",y),1==r.error.showText&&k.children("span:last-of-type").text(" "+r.error.text+" "+I+" "+r.error.secondText),!1}if(b.includes("email")){g.val(g.val().toLowerCase().replace(/[^a-zA-Z0-9@._-]/g,""));if(!g.val().match(/^([^\.\_\-\@])+([^\.\@\_\-])*((([^\d\@]){0,1})[a-z0-9]{2,}){0,1}(@([a-zA-Z]{2,})+(\.([a-z]{2,})){1,2})$/))return T.removeClass(r.empty.class+" "+r.match.class+" "+r.changes.class+" "+r.error.class+" "+r.success.class+" "+r.warning.class).addClass(r.unsuit.class),k.children("i").attr("class",iconUnsuit),1==r.unsuit.showText&&k.children("span:last-of-type").text(" "+r.unsuit.text),!1}switch(g.attr("id")){case r.match.matchThisId:return i=s("#"+r.match.matchToId),1!=l&&(k.hide(),g.next("span.glyphicon").css("top","0")),i.val().length<1?(T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.changes.class),k.children("span:last-of-type").text(""),g.next("span.glyphicon").css("top","0"),!1):g.val()!==i.val()?(1==r.match.showText&&k.children("span:last-of-type").text(" "+r.match.unmatchText),T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.changes.class).addClass(r.match.class),k.children("i").attr("class",x),g.next("span.glyphicon").removeAttr("style"),k.show(),!1):(T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.match.class).addClass(r.changes.class),k.children("span:last-of-type").text(" "+r.match.matchText),k.children("i").removeClass(x),k.hide(),g.next("span.glyphicon").css("top","0"),!1);case r.match.matchToId:if(u=(p=(i=s("#"+r.match.matchThisId)).parents("."+r.parentClass)).find("label"),1!=l&&(u.hide(),k.hide(),i.next("span.glyphicon").css("top","0"),g.next("span.glyphicon").css("top","0")),i.val().length<1)return T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.changes.class),k.children("span:last-of-type").text(""),!1;if(T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.match.class),k.children("span:last-of-type").text(""),g.val()!==i.val()){if(u.length<1)p.prepend("<label />"),p.children("label").text(o(b)),u=p.children("label"),(u=d.call(u)).find('span[data-type="'+b+'"]').length<1&&(u.append("<span />"),u.children("span").last().attr("data-type",b));return 1==r.match.showText&&u.children("span:last-of-type").text(" "+r.match.unmatchText),p.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.changes.class).addClass(r.match.class),u.children("i").attr("class",x),i.next("span.glyphicon").removeAttr("style"),u.show(),!1}return p.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.match.class).addClass(r.changes.class),u.children("span:last-of-type").text(" "+r.match.matchText),u.children("i").removeClass(x),!1}return e===g.val()?(T.removeClass(r.unsuit.class+" "+r.changes.class+" "+r.success.class+" "+r.warning.class+" "+r.empty.class+" "+r.error.class),k.children("span:last-of-type").remove(),g.siblings().is("label")&&k.html(n),!1):void 0===w?(T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.success.class+" "+r.warning.class).addClass(r.changes.class),1==r.changes.showText?k.children("span:last-of-type").text(" "+r.changes.text):k.children("span:last-of-type").remove(),1==r.chained.enabled&&g.attr("id")==r.chained.id&&s("#"+r.chained.activeOnId).trigger("change"),!1):void(void 0!==w&&(a=g.val(),T.removeClass(r.unsuit.class+" "+r.empty.class+" "+r.error.class+" "+r.success.class+" "+r.changes.class+" "+r.warning.class),k.text(o(b)),(k=d.call(k)).append("<span />"),k.children("span").last().attr("data-type",b),s.ajax({url:r.ajax.url,type:r.ajax.type,dataType:"json",data:{field:b,table:w,value:a,prevColumnName:void 0,prevColumnValue:t},success:function(s){void 0!==s.exists&&(!0===s.exists?(T.addClass(r.warning.class),k.children("i").attr("class",f),1==r.error.showText&&k.children("span:last-of-type").text(" "+r.warning.text)):(T.addClass(r.success.class),k.children("i").attr("class",m),1==r.error.showText&&k.children("span:last-of-type").text(" "+r.success.text)),h.call(g))},error:function(s){T.addClass(r.error.class),k.children("span:last-of-type").text(" "+r.ajax.errorText),solution=void 0,0===s.status&&(solution="Check Network Connection"),200===s.status&&(solution="Check Server Returns Format"),404===s.status&&(solution="Check Ajax Url"),500===s.status&&(solution="Check Internal Server"),console.log("Ajax Error Status ["+s.status+"] => "+s.statusText+" => Solution "+solution)}})))}),s(this).on("keypress",function(a){var e=s(this);return/[^a-zA-Z0-9\s@,._-]/i.test(String.fromCharCode(a.which))&&a.preventDefault(),(!e.hasClass("nospace")&&"email"!=e.attr("type")&&!e.attr("name").includes("email")&&"email"!=e.data("type")||32!==a.which)&&(e.hasClass("digit")?/\d/.test(String.fromCharCode(a.keyCode)):void 0)}),s(this).on("keyup focusout",function(a){var e=s(this);e.hasClass("textuppercase")&&e.val(e.val().toLocaleUpperCase()),e.hasClass("textlowercase")&&e.val(e.val().toLocaleLowerCase()),e.hasClass("textcapitalcase")&&e.val(o(e.val()))}),s(this).on("focusout",function(){h.call(s(this))})})}}(jQuery);